# Веб-сервер "Планировщик задач"

## Описание проекта

Проект позволяет добавлять, редактировать и удалять задачи с указанием даты, являющейся сроком их выполнения. Для задачи, выполняемой периодически, можно добавить правило повторения, определяющее новый срок, к которому она должна быть сделана. Допустимые форматы повторения: через год, через указанное количество дней, в ближайшие определённые дни недели, в ближайшие определённые дни определённых месяцев (номера дней указываются через запятую без пробелов). При отметке о выполнении срок выполнения задачи меняется в соответствии с обозначенным правилом повторения или, если такое правило не указано, задача удаляется.

Файл базы данных scheduler.db в случае его отсутствия появляется после запуска приложения в корневой папке.

## Список выполненных заданий со звёздочкой

1. Реализация возможности определять порт при запуске сервера через переменную окружения
2. Реализация возможности определять путь к файлу базы данных через переменную окружения
3. Реализация правила повторения срока выполнения задачи в форматах "в ближайшие определённые дни недели" и "в ближайшие определённые дни определённых месяцев"
4. Реализация возможности выбрать задачи через строку поиска
5. Реализация механизма аутентификации
6. Создание докер-образа

## Инструкция по запуску кода локально

Для запуска кода следует выполнить из папки проекта команду

```
./startApp
```

Для создания исполняемого файла под желаемым именем можно выполнить команду

```
go build -o <имя файла> main.go
```
### Пример .env

```
TODO_PORT=7540
TODO_DBFILE=scheduler.db
TODO_PASSWORD=highPiglet%
```

### Адрес в браузере, необходимый для пользования веб-сервером

После запуска кода для пользования веб-сервером необходимо в браузере перейти по адресу

http://localhost:7540/

В случае изменения значения по умолчанию переменной окружения "TODO_PORT" вместо "7540" следует указать новое значение переменной окружения "TODO_PORT". Например:

http://localhost:8080/

## Инструкция по запуску тестов

Для запуска всех текста следует выполнить из папки проекта команду

```
go test ./tests
```

Для запуска одного теста следует выполнить из папки проекта команду

```
go test -run ^<название теста>$ ./tests
```

Пример:

```
go test -run ^TestDelTask$ ./tests
```

### Список тестов

* testApp
* testDB
* testNextDate
* testAddTask
* testTasks
* testTask
* testEditTask
* testDone
* testDelTask

### Параметры тестов по умолчанию
```
var Port = 7540
var DBFile = "../scheduler.db"
var FullNextDate = true
var Search = true
var Token = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.e30.5GUreZLB5DhE8XoDPMzMpk6wV_ow6QSyj05yRgGVRkg`
```

## Сборка и запуск проекта через докер

Для сборки образа следует выполнить команду

```
docker build --tag app:v1 .
```

где app - название репозитория образа, а v1 - тег образа

Для запуска контейнера в фоновом режиме следует выполнить команду

```
docker run -d -p 7540:7540 app:v1
```
где app - название репозитория образа, а v1 - тег образа